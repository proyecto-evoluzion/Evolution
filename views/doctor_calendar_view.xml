<?xml version="1.0"?>
<odoo>

	<!-- Surgery Room Form -->
	<record id="clinica_surgery_room_form" model="ir.ui.view">
        <field name="name">clinica.surgery.room.form</field>
        <field name="model">clinica.surgery.room</field>
        <field name="arch" type="xml">
        <form string="Schedule Form">
        	<sheet>
        		<group name="main_group">
        			<group name="main_sub_group1" >
        				<field name='name' required="1"/>
        			</group>
        			<group name="main_sub_group2" >
        			</group>
        		</group>
        	</sheet>
        </form>
    	</field>
    </record>
    
    <!-- Surgery Room Tree -->
    <record id="clinica_surgery_room_tree" model="ir.ui.view">
        <field name="name">clinica.surgery.room.tree</field>
        <field name="model">clinica.surgery.room</field>
        <field name="arch" type="xml">
            <tree string="Surgery Room Tree">
                <field name="name"/>
            </tree>
        </field>
    </record>
    
    <!-- Surgery Room Action -->
    <record id="action_clinica_surgery_room" model="ir.actions.act_window">
        <field name="name">Surgery Rooms</field>
        <field name="res_model">clinica.surgery.room</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="clinica_surgery_room_tree"/>
    </record> 

	<!-- Schedule Form -->
	<record id="clinica_doctor_schedule_form" model="ir.ui.view">
        <field name="name">doctor.schedule.form</field>
        <field name="model">doctor.schedule</field>
        <field name="arch" type="xml">
        <form string="Schedule Form">
        	<sheet>
        		<group name="main_group">
        			<group name="main_sub_group1" >
        				<field name='professional_id' required="1"/>
        				<field name='start_date' required="1"/>
        				<field name='duration' required="1"/>
        				<field name='end_date' required="1"/>
        			</group>
        			<group name="main_sub_group2" >
        			</group>
        		</group>
        		<notebook>
        			<page name="rooms" string="Waiting Rooms/Appointments">
        				 <field name="room_ids" colspan="4" nolabel="1" readonly="1">
        				 </field>
        			</page>
        		</notebook>
        	</sheet>
        </form>
    	</field>
    </record>
    
    <!-- Schedule Tree -->
    <record id="clinica_doctor_schedule_tree" model="ir.ui.view">
        <field name="name">doctor.schedule.tree</field>
        <field name="model">doctor.schedule</field>
        <field name="arch" type="xml">
            <tree string="Schedule Tree">
                <field name="professional_id"/>
        	    <field name='start_date'/>
   				<field name="end_date"/>
            </tree>
        </field>
    </record>
    
    <!-- schedule Calendar View -->
    <record id="view_doctor_schedule_calendar" model="ir.ui.view">
        <field name="name">doctor.schedule.calendar</field>
        <field name="model">doctor.schedule</field>
        <field name="arch" type="xml">
            <calendar color="professional_id" date_start="start_date" date_stop="end_date" string="Schedule">
                <field name="professional_id"/>
                <field name="start_date"/>
                <field name="end_date"/>
            </calendar>
        </field>
    </record>
    
    <!-- Schedule Action -->
    <record id="action_clinica_doctor_schedule" model="ir.actions.act_window">
        <field name="name">Schedule</field>
        <field name="res_model">doctor.schedule</field>
        <field name="view_type">form</field>
        <field name="view_mode">calendar,tree,form</field>
        <field name="view_id" ref="view_doctor_schedule_calendar"/>
    </record> 
    
    <!-- Waitin room form -->
    <record id="clinica_waiting_room_form" model="ir.ui.view">
         <field name="name">doctor.waiting.room.form</field>
         <field name="model">doctor.waiting.room</field>
         <field name="arch" type="xml">
         <form string="Waiting Room Form">
         	<header>
                <button name="action_confirm" string="Confirm Appointment" class="btn-primary" 
                	type="object"  attrs="{'invisible':['|',('state','!=','new'),('room_type','=','surgery')]}"/>
                <button name="action_confirm" string="Confirm Room Procedure" class="btn-primary"
                 type="object" attrs="{'invisible':['|',('state','!=','new'),('room_type','=','waiting')]}"/>
                <button name="action_view_nurse_sheet" string="Create Nurse Sheet" 
                	class="btn-primary" type="object" attrs="{'invisible': ['|',('nurse_sheet_created','=',True),('state','!=','ordered')]}"/>
                <button name="action_create_so" string="Create Sales Order" 
                	class="btn-primary" type="object" states="confirmed"/>
                <button name="action_view_clinica_record_history" string="View History" 
                	type="object" class="oe_highlight"/>
            	<field name="state" widget="statusbar" statusbar_visible="new,confirmed,ordered"/>
            </header>
         	<sheet>
         		<div class="oe_button_box" name="button_box">
                    <button name="action_view_sale_order" type="object" class="oe_stat_button" icon="fa-pencil-square-o" 
                    	states="ordered" string="Quotation">
                    </button>
                    <button name="action_view_nurse_sheet" type="object" class="oe_stat_button" icon="fa-pencil-square-o" 
                    	attrs="{'invisible': [('nurse_sheet_created', '=', False)]}" string="Nurse Sheets">
                    </button>
                </div>
         		<div class="oe_title">
                    <h1>
                        <field name="name" readonly="1"/>
                    </h1>
                </div>
         		<group name="main_group">
         			<group name="main_sub_group1" >
         				<field name='room_type' invisible="1" force_save="1"/>
         				<field name='surgery_room_id' 
         				attrs="{'readonly':[('state','!=','new')], 'invisible':[('room_type','=','waiting')], 'required': [('room_type','=','surgery')]}"/>
         				<field name='schedule_id' attrs="{'readonly':[('state','!=','new')]}"/>
         				<field name='patient_id' required="1" attrs="{'readonly':[('state','!=','new')]}"/>
         				<field name='procedure_date' required="1" attrs="{'readonly':[('state','!=','new')]}"/>
         				<field name='procedure_end_date' required="1" attrs="{'readonly':[('state','!=','new')]}"/>
         			</group>
         			<group name="main_sub_group2" >
         				<field name='document_type' attrs="{'readonly':[('state','!=','new')]}"/>
         				<field name='numberid' 
         					attrs="{'invisible':[('document_type','in',['cc','ti'])],'readonly':[('state','!=','new')]}"/>
         				<field name='numberid_integer' string="Number ID" 
         					attrs="{'invisible':[('document_type','not in',['cc','ti'])],'readonly':[('state','!=','new')]}"/>
         				<field name='phone' attrs="{'readonly':[('state','!=','new')]}"/>
         				<field name='gender' attrs="{'readonly':[('state','!=','new')]}"/>
         				<field name='birth_date' attrs="{'readonly':[('state','!=','new')]}"/>
         				<label for="age" string="Age" attrs="{'readonly':[('state','!=','new')]}"/>
	       				<div>
	       					<div>
	       						<field name="age" required="1" nolabel="1" class="oe_inline" readonly="1"/>
	      						<field name="age_meassure_unit" nolabel="1" class="oe_inline" />
	       					</div>
	       				</div>
	       				<field name='nurse_sheet_created' invisible="1"/>
         			</group>
         		</group>
         		
         		<group name="profession_details">
         			<group name="profession_details_sub1" >
         				<field name='surgeon_id' domain="[('profession_type','=','doctor')]" 
         					attrs="{'readonly':[('state','!=','new')]}"/>
         				<field name='programmer_id'  attrs="{'readonly':[('state','!=','new')]}"/>
         			</group>
         			<group name="profession_details_sub2" >
         				<field name='anesthesiologist_id' domain="[('profession_type','=','anesthesiologist')]"  
         					attrs="{'readonly':[('state','!=','new')]}"/>
         				<field name='anesthesia_type'  attrs="{'readonly':[('state','!=','new')]}"/>
         			</group>
         		</group>
         		<group name="procedure">
         			<field name='procedure'  attrs="{'readonly':[('state','!=','new')]}"/>
         		</group>
         		<group name="procedure">
         			<field name='notes' />
         		</group>
         		<group name="patient_personal_info_group1" invisible="1">
         			<group name="patient_personal_info_sub1" invisible="1">
         				<field name='firstname'  attrs="{'readonly':[('state','!=','new')]}" force_save="1" />
         				<field name='lastname' attrs="{'readonly':[('state','!=','new')]}" force_save="1"/>
         				<field name='middlename' attrs="{'readonly':[('state','!=','new')]}" force_save="1"/>
         				<field name='surname' attrs="{'readonly':[('state','!=','new')]}" force_save="1"/>
         			</group>
         			<group name="patient_personal_info_sub2" >
         			</group>
         		</group>
         		<notebook>
        			<page name="procedures" string="Health Procedures">
        				 <field name="procedure_ids" colspan="4" nolabel="1"  attrs="{'readonly':[('state','!=','new')]}"
        				 	context="{'default_surgeon_id':surgeon_id,'default_anesthesiologist_id':anesthesiologist_id}">
        				 	<tree editable="bottom">
        				 		<field name="product_id" domain="[('is_health_procedure','=',True)]"/>
        				 		<field name="quantity"  invisible="1" force_save="1"/>
        				 		<field name="surgeon_id" invisible="1" force_save="1"/>
        				 		<field name="anesthesiologist_id" invisible="1" force_save="1"/>
        				 	</tree>
        				 </field>
        			</page>
        			<page name="background" string="Patient Background">
	      				<group name="pathological_background" >
	       					<group name="pathological_background_sub1">
	       						<field name="diabetes"/>
	       						<field name="hypertension"/>
	       					</group>
	       					<group name="pathological_background_sub2">
	       						<field name="arthritis"/>
	       						<field name="thyroid_disease"/>
	       					</group>
       					</group>
	       				<group name="pathological" colspan="2" col='1'>
	       					<label for="pathological" string="Pathological"/>
	       					<field name="pathological" nolabel="1"/>
	       				</group>
	       				<group name="surgical" colspan="2" col='1'>
	       					<label for="surgical" string="Surgical"/>
	       					<field name="surgical" nolabel="1"/>
	       				</group>
	       				<group name="patient_backgorund_main" >
	       					<group name="patient_backgorund_sub1" >
	       						<field name="smoke" />
	       						<label for="cigarate_daily" string="Cigarettes"/>
	                            <div>
	                                <div>
	                                    <field name="cigarate_daily" nolabel="1" class="oe_inline" />
	                                    <field name="smoke_uom" nolabel="1" class="oe_inline" style="padding-left:4px;"/>
	                                </div>
	                            </div>
	       						<field name="is_alcoholic" />
	       						<label for="alcohol_frequency" string="Frequency"/>
	                            <div>
	                                <div>
	                                    <field name="alcohol_frequency"  nolabel="1" class="oe_inline"/>
	                                    <field name="alcohol_frequency_uom" nolabel="1" class="oe_inline" style="padding-left:4px;"/>
	                                </div>
	                            </div>
	       						<field name="marijuana" />
	       						<field name="cocaine" />
	       						<field name="ecstasy" />
	       						
	       					</group>
	       					<group name="patient_backgorund_sub2" >
	       						<field name="body_background_others" string="Others"/>
	       						<field name="pharmacological" />
	       						<field name="allergic" />
	       					</group>
	       				</group>
	       				<group name="patient_female_backgorund_main" attrs="{'invisible':[('gender','=','male')]}">
	       					<group name="patient_female_backgorund_sub1" >
	       						<field name="pregnancy_number" />
	       						<field name="child_number" />
	       						<field name="abortion_number" />
	       					</group>
	       					<group name="patient_female_backgorund_sub2" >
	       						<field name="last_birth_date" />
	       						<field name="last_menstruation_date" />
	       						<field name="contrtaceptive_methods" />
	       					</group>
	       				</group>
	      			</page>
        		</notebook>
         	</sheet>
         </form>
         </field>
     </record>
     
    <!-- Waiting room tree -->
    <record id="clinica_waiting_room_tree" model="ir.ui.view">
        <field name="name">doctor.waiting.room.tree</field>
        <field name="model">doctor.waiting.room</field>
        <field name="arch" type="xml">
            <tree string="Waiting Room Tree">
                <field name="schedule_id"/>
        	    <field name='patient_id'/>
   				<field name="surgeon_id"/>
   				<field name="anesthesiologist_id"/>
   				<field name="procedure_date"/>
   				<field name="procedure_end_date"/>
            </tree>
        </field>
    </record>
    
    <!--  Waiting room View -->
    <record id="view_waiting_room_calendar" model="ir.ui.view">
        <field name="name">doctor.waiting.room</field>
        <field name="model">doctor.waiting.room</field>
        <field name="arch" type="xml">
            <calendar color="surgeon_id" date_start="procedure_date" date_stop="procedure_end_date" string="Waiting Room">
                <field name="surgeon_id"/>
                <field name="anesthesiologist_id"/>
                <field name="patient_id"/>
                <field name="procedure_date"/>
                <field name="procedure_end_date"/>
            </calendar>
        </field>
    </record>
        
   <record id="clinica_waiting_room_filter" model="ir.ui.view">
        <field name="name">doctor.waiting.room.search</field>
        <field name="model">doctor.waiting.room</field>
        <field name="arch" type="xml">
            <search string="Search Appointments">
                <field name="surgeon_id"  />
                <field name='anesthesiologist_id'/>
                <field name="patient_id" />
                <field name="schedule_id" />
                <group expand="0" string="Group By">
                	<filter string="Patient" name="groupby_patient_id" domain="[]" context="{'group_by':'patient_id'}"/>
                	<filter string="Surgeon" name="groupby_surgeon_id" domain="[]" context="{'group_by':'surgeon_id'}"/>
                	<filter string="Anesthesiologist" name="groupby_anesthesiologist_id" domain="[]" context="{'group_by':'anesthesiologist_id'}"/>
                </group>
            </search>
        </field>
   </record>
        
        
    <!-- Waiting room search -->
    <record id="action_clinica_waiting_room" model="ir.actions.act_window">
        <field name="name">Appointment</field>
        <field name="res_model">doctor.waiting.room</field>
        <field name="view_type">form</field>
        <field name="view_mode">calendar,tree,form</field>
        <field name="domain">[('room_type','=','waiting')]</field>
        <field name="context">{'default_room_type': 'waiting'}</field>
        <field name="view_id" ref="view_waiting_room_calendar"/>
        <field name="search_view_id" ref="clinica_waiting_room_filter"/>
    </record> 
    
    <record id="action_clinica_waiting_room_view1" model="ir.actions.act_window.view">
    	<field eval="2" name="sequence"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="clinica_waiting_room_tree"/>
        <field name="act_window_id" ref="action_clinica_waiting_room"/>
    </record>
    
    <record id="action_clinica_waiting_room_view2" model="ir.actions.act_window.view">
    	<field eval="1" name="sequence"/>
        <field name="view_mode">calendar</field>
        <field name="view_id" ref="view_waiting_room_calendar"/>
        <field name="act_window_id" ref="action_clinica_waiting_room"/>
    </record>
    
    
    <!-- surgery room tree -->
    <record id="clinica_surgery_room_procedures_tree" model="ir.ui.view">
        <field name="name">doctor.waiting.room.tree</field>
        <field name="model">doctor.waiting.room</field>
        <field name="arch" type="xml">
            <tree string="Surgery Room Tree">
                <field name="surgery_room_id"/>
                <field name="schedule_id"/>
        	    <field name='patient_id'/>
   				<field name="surgeon_id"/>
   				<field name="anesthesiologist_id"/>
   				<field name="procedure_date"/>
   				<field name="procedure_end_date"/>
            </tree>
        </field>
    </record>
    
    <!--  surgery room calendar View -->
    <record id="view_surgery_room_procedures_calendar" model="ir.ui.view">
        <field name="name">doctor.waiting.room</field>
        <field name="model">doctor.waiting.room</field>
        <field name="arch" type="xml">
            <calendar color="surgery_room_id" date_start="procedure_date" date_stop="procedure_end_date" string="Surgery Room">
                <field name="surgery_room_id"/>
                <field name="surgeon_id"/>
                <field name="anesthesiologist_id"/>
                <field name="patient_id"/>
                <field name="procedure_date"/>
                <field name="procedure_end_date"/>
            </calendar>
        </field>
    </record>
   
   <!--  surgery room search -->
   <record id="clinica_surgery_room_procedures_filter" model="ir.ui.view">
        <field name="name">doctor.waiting.room.search</field>
        <field name="model">doctor.waiting.room</field>
        <field name="arch" type="xml">
            <search string="Search Surgery room procedures">
                <field name="surgery_room_id"  />
                <field name="surgeon_id"  />
                <field name='anesthesiologist_id'/>
                <field name="patient_id" />
                <field name="schedule_id" />
                <group expand="0" string="Group By">
                	<filter string="Surgery Room" name="groupby_surgery_room_id" domain="[]" context="{'group_by':'surgery_room_id'}"/>
                	<filter string="Patient" name="groupby_patient_id" domain="[]" context="{'group_by':'patient_id'}"/>
                	<filter string="Surgeon" name="groupby_surgeon_id" domain="[]" context="{'group_by':'surgeon_id'}"/>
                	<filter string="Anesthesiologist" name="groupby_anesthesiologist_id" domain="[]" context="{'group_by':'anesthesiologist_id'}"/>
                </group>
            </search>
        </field>
   </record>
        
        
    <!-- surgery room action -->
    <record id="action_clinica_surgery_room_procedures" model="ir.actions.act_window">
        <field name="name">Surgery Room Procedures</field>
        <field name="res_model">doctor.waiting.room</field>
        <field name="view_type">form</field>
        <field name="view_mode">calendar,tree,form</field>
        <field name="domain">[('room_type','=','surgery')]</field>
        <field name="context">{'default_room_type': 'surgery'}</field>
        <field name="view_id" ref="view_surgery_room_procedures_calendar"/>
        <field name="search_view_id" ref="clinica_surgery_room_procedures_filter"/>
    </record> 
    
    <record id="action_clinica_surgery_room_procedures_view1" model="ir.actions.act_window.view">
        <field eval="2" name="sequence"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="clinica_surgery_room_procedures_tree"/>
        <field name="act_window_id" ref="action_clinica_surgery_room_procedures"/>
    </record>
    
    <record id="action_clinica_surgery_room_procedures_view2" model="ir.actions.act_window.view">
    	<field eval="1" name="sequence"/>
        <field name="view_mode">calendar</field>
        <field name="view_id" ref="view_surgery_room_procedures_calendar"/>
        <field name="act_window_id" ref="action_clinica_surgery_room_procedures"/>
    </record>
            
   <!-- Waitin room menu -->
   <menuitem id="menu_clinica_waiting_room"
       name="Waiting Room "
       parent="menu_doctor_process"
       action="clinica_doctor_data.action_clinica_waiting_room"
       sequence="3"/>
       
  <!-- Surgery room menu -->
   <menuitem id="menu_clinica_surgery_room_procedures"
       name="Surgery Room Procedures"
       parent="menu_doctor_process"
       action="clinica_doctor_data.action_clinica_surgery_room_procedures"
       sequence="2"/>
    
    
    <!-- Schedule menu -->
    <menuitem id="menu_clinica_doctor_schedule"
        name="Schedule"
        parent="menu_doctor_process"
        action="clinica_doctor_data.action_clinica_doctor_schedule"
        sequence="4"/>
        
   <menuitem id="menu_clinica_surgery_room"
            name="Surgery Rooms"
            parent="menu_doctor_config_details"
            action="action_clinica_surgery_room"
            sequence="2"/>
</odoo>