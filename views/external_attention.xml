<?xml version="1.0"?>
<odoo>
        
        <record id="clinica_plastic_surgery_form2" model="ir.ui.view">
            <field name="name">clinica.plastic.surgery2.form</field>
            <field name="model">clinica.plastic.surgery2</field>
            <field name="arch" type="xml">
            <form string="Plastic Surgery Form">
                <header>
                    <button name="action_view_clinica_record_history" string="View History" 
                        type="object" class="oe_highlight"/>
                    <button name="action_set_close" string="Set to Close" 
                        type="object" states="open"/>
                    <field name="state" widget="statusbar" statusbar_visible="open,closed"/>
                </header>
                <sheet>
                    <group name="main_group">
                        <group name="main_sub_group1" >
                            <field name='date_attention' required="1" string="Fecha de atención" attrs="{'readonly':[('state','=','closed')]}"/>
                            <!-- <field name='attention_code_id' required="1"/> -->
                            <field name='type_id' invisible="1"/>
                        </group>
                        <group name="main_sub_group2" >
                            <field name='number' readonly="1" string="Atención Nº"/>
                        </group>
                    </group>
                    <group name="attention_details">
                        <field name='patient_id' required="1" string="Paciente" attrs="{'readonly':[('state','=','closed')]}"/>
                        <field name="gender" invisible="1" />
                    </group>
                    <group name="consultation_reason" colspan="2" col='1'>
                         <label for="consultation_reason" string="Reason for Consultation"/>
                         <field name="consultation_reason" nolabel="1" attrs="{'readonly':[('state','=','closed')]}"/>
                     </group>
                            
                    <notebook>
                        <page name="background" string="Patient Background">

                            <group name="pathological" colspan="2" col='1'>
                                <label for="pathological" string="Pathological"/>
                                <field name="pathological" nolabel="1" attrs="{'readonly':[('state','=','closed')]}"/>
                            </group>
                            <group name="surgical" colspan="2" col='1'>
                                <label for="surgical" string="Surgical"/>
                                <field name="surgical" nolabel="1" attrs="{'readonly':[('state','=','closed')]}"/>
                            </group>
                            <group name="toxic" colspan="2" col='1'>
                                <label for="toxic" string="Toxic"/>
                                <field name="toxic" nolabel="1" attrs="{'readonly':[('state','=','closed')]}"/>
                            </group>
                            <group name="allergic" colspan="2" col='1'>
                                <label for="allergic" string="Allergic"/>
                                <field name="allergic" nolabel="1" attrs="{'readonly':[('state','=','closed')]}"/>
                            </group>
                            <group name="pharmacological" colspan="2" col='1'>
                                <label for="pharmacological" string="Pharmacological"/>
                                <field name="pharmacological" nolabel="1" attrs="{'readonly':[('state','=','closed')]}"/>
                            </group>
                            <group name="gyneco_obst" colspan="2" col='1'>
                                <label for="gyneco_obst" string="Gyneco-Obstetricians"/>
                                <field name="gyneco_obst" nolabel="1" attrs="{'readonly':[('state','=','closed')]}"/>
                            </group>

                            <group name="patient_female_backgorund_main" attrs="{'invisible':[('gender','=','male')]}">
                                
                                <div>
                                    <label for="gestations" string="G" />
                                    <field name="gestations" class="oe_inline" width="20" attrs="{'readonly':[('state','=','closed')]}"/>
                                    <label for="births" string="P" />
                                    <field name="births" class="oe_inline" style="width:20%" attrs="{'readonly':[('state','=','closed')]}"/>
                                    <label for="cesarean" string="C" />
                                    <field name="cesarean"  class="oe_inline" style="width:20%" attrs="{'readonly':[('state','=','closed')]}"/>
                                    <label for="abortion_number" string="A" />
                                    <field name="abortion_number" class="oe_inline" style="width:20%" attrs="{'readonly':[('state','=','closed')]}"/>
                                    <label for="last_menstruation_date" string="FUR" />
                                    <field name="last_menstruation_date" class="oe_inline" style="width:20%" attrs="{'readonly':[('state','=','closed')]}"/>
                                    <label for="last_birth_date" string="FUP" />
                                    <field name="last_birth_date" class="oe_inline" style="width:20%" attrs="{'readonly':[('state','=','closed')]}"/>
                                    <label for="mature_promoting_factor" string="MPF" />
                                    <field name="mature_promoting_factor" class="oe_inline" style="width:20%" attrs="{'readonly':[('state','=','closed')]}"/>
                                   
                                </div>   

                            </group >

                            <group name="relatives" colspan="2" col='1'>
                                <label for="relatives" string="Relatives"/>
                                <field name="relatives" nolabel="1" attrs="{'readonly':[('state','=','closed')]}"/>
                            </group>
                            <group name="others" colspan="2" col='1'>
                                <label for="others" string="Others"/>
                                <field name="others" nolabel="1" attrs="{'readonly':[('state','=','closed')]}"/>
                            </group>
                            
                        </page>
                        <page name="physical_exam" string="Physical Exam">
                            <div class="col-md-12">
                                <h1>Physical Examination</h1>
                                <div name="paraclinical" class="col-md-4" string="Size and weight">
                                    <h3>Size and weight</h3>
                                    <label for="size" string="Size"/>
                                    <field name="size" nolabel="1" attrs="{'readonly':[('state','=','closed')]}" style="width:50%;"/><br></br>
                                    <label for="weight" string="Weight"/>
                                    <field name="weight" nolabel="1" attrs="{'readonly':[('state','=','closed')]}" style="width:50%;"/><br></br>
                                    <label for="imc" string="IMC"/>
                                    <field name="imc" nolabel="1" attrs="{'readonly':[('state','=','closed')]}" style="width:50%;"/>
                                </div>
                                <div name="vital_s" class="col-md-4" string="vital S">
                                    <h3>vital S</h3>
                                    <label for="heart_rate" string="Heart rate"/>
                                    <field name="heart_rate" nolabel="1" attrs="{'readonly':[('state','=','closed')]}" style="width:50%;"/><br></br>
                                    <label for="breathing_frequency" string="Breathing frequency"/>
                                    <field name="breathing_frequency" nolabel="1" attrs="{'readonly':[('state','=','closed')]}" style="width:50%;"/>
                                </div>
                                <div name="blood_pressure" class="col-md-4" string="Blood pressure">
                                    <h3>Blood pressure</h3>
                                    <label for="systolic_blood_pressure" string="Systolic blood pressure"/>
                                    <field name="systolic_blood_pressure" nolabel="1" attrs="{'readonly':[('state','=','closed')]}" style="width:50%;"/><br></br>
                                    <label for="diastolic_blood_pressure" string="Diastolic blood pressure"/>
                                    <field name="diastolic_blood_pressure" nolabel="1" attrs="{'readonly':[('state','=','closed')]}" style="width:50%;"/>
                                </div>
                            </div>
                            <group>
                                <field name="physical_examination_ids" nolabel="1" attrs="{'readonly':[('state','=','closed')]}">
                                    <tree editable="bottom">
                                        <field name="element" domain="['|',('professional_id.res_user_id','=',uid),('professional_id','=',False)]"/>
                                        <field name="physical_examination"/>        
                                    </tree>
                                </field>
                            </group>
                            <group name="physical_exam" colspan="2" col='1'>
                                <label for="physical_exam" string="Physical Exam Observations"/>
                                <field name="physical_exam" nolabel="1" attrs="{'readonly':[('state','=','closed')]}"/>
                            </group>
                        </page>
                        <page name="paraclinical_exam" string="Dx and Treatment">

                        <group name="disease_details" string="Main Disease">
                            <group>
                            <field name='disease_id' string="Diagnóstico" attrs="{'readonly':[('state','=','closed')]}"/>
                            </group>
                            <group>
                            <!-- <field name='disease_type' /> -->
                            <!-- <field name='disease_state' attrs="{'invisible':[('disease_type','=','related')]}" string="Kind"/> -->
                            <field name='disease_state' string="Tipo" attrs="{'readonly':[('state','=','closed')]}"/>
                            </group>  
                        </group>
                        
                        <group name="treatment" colspan="2" col='1'>
                            <label for="treatment" string="Treatment"/>
                            <field name="treatment" nolabel="1" attrs="{'readonly':[('state','=','closed')]}"/>
                        </group>
                        <group name="template">
                            <group name="template_sub1">
                                <field name='medical_recipe_template_id' options="{'no_create_edit': True}"
                                    domain="[('user_id','=',uid),('type','=','medical_recipe')]" string="Plantilla" attrs="{'readonly':[('state','=','closed')]}"/>
                            </group>
                            <group></group>
                        </group>
                        <!-- <group name="medical_recipe" colspan="2" col='1'>
                            <label for="medical_recipe" string="Medical Orders and Recipe"/>
                            <field name="medical_recipe" nolabel="1"/>
                        </group> -->
                        <group name="prescription" colspan="2" col='1'>
                            <label for="prescription_id" string="Prescription"/>
                            <field name="prescription_id" nolabel="1" domain="[('load_register','=',True)]" attrs="{'readonly':[('state','=','closed')]}" context="{'default_patient_id':patient_id}"/>
                        </group>
                        </page>  
                    </notebook>
                </sheet>
            </form>
            </field>
        </record>
        
        <record id="clinica_plastic_surgery_tree2" model="ir.ui.view">
            <field name="name">clinica.plastic.surgery2.tree</field>
            <field name="model">clinica.plastic.surgery2</field>
            <field name="arch" type="xml">
                <tree string="Presurgical Tree">
                    <field name="number"/>
                    <!-- <field name='attention_code_id'/> -->
                    <field name="date_attention"/>
                    <field name="patient_id"/>
                    <field name="document_type"/>
                    <field name="numberid"/>
                </tree>
            </field>
        </record>
        
        
        <record id="clinica_plastic_surgery_filter2" model="ir.ui.view">
            <field name="name">clinica.plastic.surgery2.search</field>
            <field name="model">clinica.plastic.surgery2</field>
            <field name="arch" type="xml">
                <search string="Search Plastic Surgery">
                    <field name="numberid" string="Doc. Identidad"/>
                    <!-- <field name='attention_code_id'/> -->
                    <field name="patient_id" string="Nombre paciente"/>
                    <group expand="0" string="Group By">
                        <filter string="Patient" name="groupby_patient_id" domain="[]" context="{'group_by':'patient_id'}"/>
                    </group>
                </search>
            </field>
       </record>
        
        <record id="action_clinica_plastic_surgery2" model="ir.actions.act_window">
            <field name="name">Formato Clínico</field>
            <field name="res_model">clinica.plastic.surgery2</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="clinica_plastic_surgery_tree2"/>
            <field name="search_view_id" ref="clinica_plastic_surgery_filter2"/>
        </record> 
        
        <menuitem id="menu_clinica_plastic_surgery2"
            name="Formato Clínico"
            parent="menu_doctor_process"
            action="clinica_doctor_data.action_clinica_plastic_surgery2"
            sequence="9"
            groups="base.group_system,clinica_doctor_data.anesthesiologist,clinica_doctor_data.surgeon,clinica_doctor_data.management"
            />

        <!--Sala de espera Consulta externa-->

        <!-- Waitin room form -->
    <record id="clinica_waiting_room_form2" model="ir.ui.view">
         <field name="name">doctor.waiting.room2.form</field>
         <field name="model">doctor.waiting.room2</field>
         <field name="arch" type="xml">
         <form string="Waiting Room Form">
            <header>
                <button name="action_confirm" string="Confirm Appointment" class="btn-primary" 
                    type="object"  attrs="{'invisible':['|',('state','!=','new'),('room_type','=','surgery')]}"/>
                <button name="action_confirm" string="Confirm Room Procedure" class="btn-primary"
                 type="object" attrs="{'invisible':['|',('state','!=','new'),('room_type','=','waiting')]}"/>
                 <button name="action_view_anhestesic_registry" string="Create Anhestesic Registry" 
                    class="btn-primary" type="object" attrs="{'invisible': ['|',('anhestesic_registry_created','=',True),('state','!=','ordered')]}"
                    groups="base.group_system,clinica_doctor_data.anesthesiologist,clinica_doctor_data.surgeon,clinica_doctor_data.nursing_assistant,clinica_doctor_data.nursery_chief,clinica_doctor_data.programmer_assistant,clinica_doctor_data.clinical_auditor,clinica_doctor_data.management"/>
                <button name="action_view_nurse_sheet" string="Create Nurse Sheet" 
                    class="btn-primary" type="object" attrs="{'invisible': ['|',('nurse_sheet_created','=',True),('state','!=','ordered')]}"
                    groups="base.group_system,clinica_doctor_data.nursing_assistant,clinica_doctor_data.nursery_chief,clinica_doctor_data.programmer_assistant,clinica_doctor_data.clinical_auditor"/>
                <button name="action_create_so" string="Create Sales Order" 
                    class="btn-primary" type="object" states="confirmed"/>
                <!-- <button name="action_view_clinica_record_history" string="View History" 
                    type="object" class="oe_highlight"/> -->
                <field name="state" widget="statusbar" statusbar_visible="new,confirmed,ordered"/>
            </header>
            <sheet>
                <div class="oe_button_box" name="button_box">
                    <button name="action_view_sale_order" type="object" class="oe_stat_button" icon="fa-pencil-square-o" 
                        states="ordered" string="Quotation" 
                        groups="base.group_system,clinica_doctor_data.programmer_assistant">
                    </button>
                    <button name="action_view_anhestesic_registry" type="object" class="oe_stat_button" icon="fa-pencil-square-o" 
                        attrs="{'invisible': [('anhestesic_registry_created', '=', False)]}" string="Anhestesic Registry"
                        groups="base.group_system,clinica_doctor_data.anesthesiologist,clinica_doctor_data.programmer_assistant,clinica_doctor_data.clinical_auditor,clinica_doctor_data.management">
                    </button>
                    <button name="action_view_nurse_sheet" type="object" class="oe_stat_button" icon="fa-pencil-square-o" 
                        attrs="{'invisible': [('nurse_sheet_created', '=', False)]}" string="Nurse Sheets"
                        groups="base.group_system,clinica_doctor_data.nursing_assistant,clinica_doctor_data.nursery_chief,clinica_doctor_data.programmer_assistant,clinica_doctor_data.clinical_auditor">
                    </button>
                    <button name="action_view_presurgical_record" type="object" class="oe_stat_button" icon="fa-pencil-square-o" 
                        string="Pre-Surgical Records"
                        groups="clinica_doctor_data.anesthesiologist,clinica_doctor_data.nursing_assistant,clinica_doctor_data.programmer_assistant,clinica_doctor_data.clinical_auditor,clinica_doctor_data.management">
                    </button>
                    <button name="action_not_attended" type="object" class="oe_stat_button" icon="fa-calendar-times-o" 
                        string="No asistió"
                        attrs="{'invisible':[('patient_state','!=','dated')]}">
                    </button>
                    <!-- <button name="action_view_quirurgic_sheet" type="object" class="oe_stat_button" icon="fa-pencil-square-o" 
                        string="Quirurgic Sheet"
                        groups="clinica_doctor_data.surgeon,clinica_doctor_data.nursing_assistant,clinica_doctor_data.programmer_assistant,clinica_doctor_data.clinical_auditor,clinica_doctor_data.management">
                    </button> -->
                    <!-- <button name="action_view_quirurgical_check_list" type="object" class="oe_stat_button" icon="fa-pencil-square-o" 
                        string="Quirurgical Check List"
                        groups="base.group_system,clinica_doctor_data.nursing_assistant,clinica_doctor_data.nursery_chief,clinica_doctor_data.programmer_assistant,clinica_doctor_data.clinical_auditor">
                    </button> -->
                    <!-- <button name="action_view_post_anhestesic_care" type="object" class="oe_stat_button" icon="fa-pencil-square-o" 
                        string="Cuidado Post-Anestésico"
                        groups="clinica_doctor_data.management,clinica_doctor_data.anesthesiologist">
                    </button> -->
                    <button name="action_view_plastic_surgery" type="object" class="oe_stat_button" icon="fa-pencil-square-o" 
                        string="Formato Clínico"
                        groups="base.group_system,clinica_doctor_data.surgeon,clinica_doctor_data.nursing_assistant,clinica_doctor_data.programmer_assistant,clinica_doctor_data.clinical_auditor">
                    </button>
                    <!-- <button name="action_view_medical_evolution" type="object" class="oe_stat_button" icon="fa-pencil-square-o" 
                        string="Med. Order and Evolution"
                        groups="clinica_doctor_data.surgeon,clinica_doctor_data.nursing_assistant,clinica_doctor_data.programmer_assistant,clinica_doctor_data.clinical_auditor,clinica_doctor_data.management">
                    </button> -->
                    <!-- <button name="action_view_epicrisis" type="object" class="oe_stat_button" icon="fa-pencil-square-o" 
                        string="Epicrisis"
                        groups="clinica_doctor_data.surgeon,clinica_doctor_data.nursing_assistant,clinica_doctor_data.programmer_assistant,clinica_doctor_data.clinical_auditor,clinica_doctor_data.management">
                    </button> -->
                </div>
                <div class="oe_title">
                    <h1>
                        <field name="name" readonly="1"/>
                        <field name="patient_state" invisible="1"/>
                    </h1>
                </div>
                <group name="main_group">
                    <group name="main_sub_group1" >
                        <field name='room_type' invisible="1" force_save="1"/>
                        <field name='surgery_room_id' 
                        attrs="{'readonly':[('state','!=','new')], 'invisible':[('room_type','=','waiting')], 'required': [('room_type','=','surgery')]}"/>
                        <!-- <field name='schedule_id' attrs="{'readonly':[('state','!=','new')]}"
                            domain="[('start_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59))), ('start_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0)))]" /> -->
                        <field name='patient_id' required="1" attrs="{'readonly':[('state','!=','new')]}" context="{'default_firstname': firstname,
                            'default_lastname': lastname,
                            'default_email': email_from}"/>
                        <field name='user_type' attrs="{'readonly':[('state','!=','new')]}"/>
                        <field name='appointment_type_id' attrs="{'readonly':[('state','!=','new')]}"/>
                        <field name='procedure_date' required="1" attrs="{'readonly':[('state','=','ordered')]}"/>
                        <field name='procedure_end_date' required="1" attrs="{'readonly':[('state','=','ordered')]}"/>
                        
                    </group>
                    <group name="main_sub_group2" >
                        <field name='document_type' attrs="{'readonly':[('state','!=','new')]}"/>
                        <field name='numberid' 
                            attrs="{'invisible':[('document_type','in',['cc','ti'])],'readonly':[('state','!=','new')]}"/>
                        <field name='numberid_integer' string="Number ID" 
                            attrs="{'invisible':[('document_type','not in',['cc','ti'])],'readonly':[('state','!=','new')]}"/>
                        <field name='phone' attrs="{'readonly':[('state','!=','new')]}"/>
                        <field name='gender' attrs="{'readonly':[('state','!=','new')]}"/>
                        <field name='birth_date' attrs="{'readonly':[('state','!=','new')]}"/>
                        <label for="age" string="Age" attrs="{'readonly':[('state','!=','new')]}"/>
                        <div>
                            <div>
                                <field name="age" required="1" nolabel="1" class="oe_inline" readonly="1"/>
                                <field name="age_meassure_unit" nolabel="1" class="oe_inline" />
                            </div>
                        </div>
                        <field name='insurer_id' attrs="{'readonly':[('state','!=','new')]}" domain="[('is_company','=',True)]" options="{'no_create_edit': True}"/>
                        <field name='assurance_plan_id' attrs="{'readonly':[('state','!=','new')]}" domain="[('insurer_id','=',insurer_id)]"/>
                        <field name='nurse_sheet_created' invisible="1"/>
                        <field name='anhestesic_registry_created' invisible="1"/>
                    </group>
                </group>
                
                <group name="assigned_professionals">
                    <field name="assigned_professional_ids" readonly="1" widget="many2many_tags"/>
                    <field name="from_surgery_procedure" readonly="1" force_save="1" invisible="1"/>
                </group>
                
                <group name="profession_details">
                    <group name="profession_details_sub1" >
                        <field name='surgeon_id' domain="[('profession_type','=','plastic_surgeon')]" 
                            attrs="{'readonly':[('state','!=','new')]}"/>
                        <!-- <field name='programmer_id'  attrs="{'readonly':[('state','!=','new')]}"/> -->
                    </group>
                    <group name="profession_details_sub2" >
                        <field name='anesthesiologist_id' domain="[('profession_type','=','anesthesiologist')]"  
                            attrs="{'readonly':[('state','!=','new'),('state','!=','confirmed')]}"/>
                        <field name='anesthesia_type'  attrs="{'readonly':[('state','!=','new'),('state','!=','confirmed')]}"/>
                    </group>
                </group>
                <!-- <group name="professionald_group">
                    <group>
                        <field name='circulating_id' domain="[('profession_type','=','nurse')]" />
                        <field name='nurse_boss_id' domain="[('profession_type','=','nurse')]"/>
                    </group>
                    <group>
                        <field name='technologist_id' domain="[('profession_type','=','technologists')]"/>   
                    </group>
                </group> -->
                <!-- <group name="procedure">
                    <field name='procedure'  attrs="{'readonly':[('state','!=','new')]}"/>
                </group> -->
                <group name="procedure">
                    <field name='notes' />
                </group>
                <group name="patient_personal_info_group1" invisible="1">
                    <group name="patient_personal_info_sub1" invisible="1">
                        <field name='firstname'  attrs="{'readonly':[('state','!=','new')]}" force_save="1" />
                        <field name='lastname' attrs="{'readonly':[('state','!=','new')]}" force_save="1"/>
                        <field name='middlename' attrs="{'readonly':[('state','!=','new')]}" force_save="1"/>
                        <field name='surname' attrs="{'readonly':[('state','!=','new')]}" force_save="1"/>
                        <field name='email_from' attrs="{'readonly':[('state','!=','new')]}" force_save="1"/>
                    </group>
                    <group name="patient_personal_info_sub2" >
                    </group>
                </group>
                <notebook>
                    <page name="procedures" string="Health Procedures">
                         <field name="procedure_ids" colspan="4" nolabel="1" attrs="{'readonly':[('state','!=','new'),('state','!=','confirmed')]}"
                            context="{'default_surgeon_id':surgeon_id,'default_anesthesiologist_id':anesthesiologist_id}">
                            <tree editable="bottom">
                                <field name="product_id" domain="[('is_health_procedure','=',True)]"/>
                                <field name="quantity"  invisible="1" force_save="1"/>
                                <field name="surgeon_id" invisible="1" force_save="1"/>
                                <field name="anesthesiologist_id" invisible="1" force_save="1"/>
                            </tree>
                         </field>
                    </page>
                    <!-- <page name="background" string="Patient Background">
                        <group name="pathological_background" >
                            <group name="pathological_background_sub1">
                                <field name="diabetes"/>
                                <field name="hypertension"/>
                            </group>
                            <group name="pathological_background_sub2">
                                <field name="arthritis"/>
                                <field name="thyroid_disease"/>
                            </group>
                        </group>
                        <group name="pathological" colspan="2" col='1'>
                            <label for="pathological" string="Pathological"/>
                            <field name="pathological" nolabel="1"/>
                        </group>
                        <group name="surgical" colspan="2" col='1'>
                            <label for="surgical" string="Surgical"/>
                            <field name="surgical" nolabel="1"/>
                        </group>
                        <group name="patient_backgorund_main" >
                            <group name="patient_backgorund_sub1" >
                                <field name="smoke" />
                                <label for="cigarate_daily" string="Cigarettes"/>
                                <div>
                                    <div>
                                        <field name="cigarate_daily" nolabel="1" class="oe_inline" />
                                        <field name="smoke_uom" nolabel="1" class="oe_inline" style="padding-left:4px;"/>
                                    </div>
                                </div>
                                <field name="is_alcoholic" />
                                <label for="alcohol_frequency" string="Frequency"/>
                                <div>
                                    <div>
                                        <field name="alcohol_frequency"  nolabel="1" class="oe_inline"/>
                                        <field name="alcohol_frequency_uom" nolabel="1" class="oe_inline" style="padding-left:4px;"/>
                                    </div>
                                </div>
                                <field name="marijuana" />
                                <field name="cocaine" />
                                <field name="ecstasy" />
                                
                            </group>
                            <group name="patient_backgorund_sub2" >
                                <field name="body_background_others" string="Others"/>
                                <field name="pharmacological" />
                                <field name="allergic" />
                            </group>
                        </group>
                        <group name="patient_female_backgorund_main" attrs="{'invisible':[('gender','=','male')]}">
                            <group name="patient_female_backgorund_sub1" >
                                <field name="pregnancy_number" />
                                <field name="child_number" />
                                <field name="abortion_number" />
                            </group>
                            <group name="patient_female_backgorund_sub2" >
                                <field name="last_birth_date" />
                                <field name="last_menstruation_date" />
                                <field name="contrtaceptive_methods" />
                            </group>
                        </group>
                    </page> -->
                </notebook>
            </sheet>
         </form>
         </field>
     </record>
     
    <!-- Waiting room tree -->
    <record id="clinica_waiting_room_tree2" model="ir.ui.view">
        <field name="name">doctor.waiting.room2.tree</field>
        <field name="model">doctor.waiting.room2</field>
        <field name="arch" type="xml">
            <tree string="Waiting Room Tree" decoration-success="patient_state in ('attended')" 
              decoration-bf="patient_state == 'dated'"
              decoration-warning="patient_state == 'not_attended'" 
              decoration-info="patient_state == 'in_room'"
              default_order="procedure_date">
                <!--<field name="schedule_id"/>-->
                <field name="patient_id" string="Paciente"/>
                <field name="surgeon_id" string="Profesional"/>
                <!--<field name="anesthesiologist_id"/>-->
                <field name="procedure_date" string="Hora Inicio"/>
                <!--<field name="procedure_end_date"/>-->
                <field name="patient_state"/>
            </tree>
        </field>
    </record>
    
    <!--  Waiting room View -->
    <record id="view_waiting_room_calendar2" model="ir.ui.view">
        <field name="name">doctor.waiting.room2</field>
        <field name="model">doctor.waiting.room2</field>
        <field name="arch" type="xml">
            <calendar color="surgeon_id" date_start="procedure_date" date_stop="procedure_end_date" string="Waiting Room" quick_add="False" mode="week">
                <field name="surgeon_id"/>
                <field name="anesthesiologist_id"/>
                <field name="patient_id"/>
                <field name="procedure_date"/>
                <field name="procedure_end_date"/>
            </calendar>
        </field>
    </record>
        
   <record id="clinica_waiting_room_filter2" model="ir.ui.view">
        <field name="name">doctor.waiting.room2.search</field>
        <field name="model">doctor.waiting.room2</field>
        <field name="arch" type="xml">
            <search string="Search Appointments">
                <field name="surgeon_id"  />
                <field name='anesthesiologist_id'/>
                <field name="patient_id" />
                <field name="schedule_id" />
                <filter string="Today's Confirmed/Ordered Appointments" name="confirmed_today" domain="[('state','in', ['confirmed','ordered']),
                   ('procedure_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59))), ('procedure_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0)))]"/>
                <filter string="Confirmed" name="confirmed" domain="[('state','=', 'confirmed')]"/>
                <filter string="Ordered" name="ordered" domain="[('state','=','ordered')]"/>
                <filter string="Today's Appointments" name="today_appointement"
                    domain="[('procedure_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59))), ('procedure_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0)))]" />
                <group expand="0" string="Group By">
                    <filter string="Patient" name="groupby_patient_id" domain="[]" context="{'group_by':'patient_id'}"/>
                    <filter string="Surgeon" name="groupby_surgeon_id" domain="[]" context="{'group_by':'surgeon_id'}"/>
                    <filter string="Anesthesiologist" name="groupby_anesthesiologist_id" domain="[]" context="{'group_by':'anesthesiologist_id'}"/>
                </group>
            </search>
        </field>
   </record>
        
        
    <!-- Waiting room search -->
    <record id="action_clinica_waiting_room2" model="ir.actions.act_window">
        <field name="name">Agenda</field>
        <field name="res_model">doctor.waiting.room2</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,calendar,form</field>
        <field name="domain"></field>
        <field name="context">{'default_room_type': 'waiting', 'search_default_confirmed_today':1}</field>
        <field name="view_id" ref="clinica_waiting_room_tree2"/>
        <field name="search_view_id" ref="clinica_waiting_room_filter2"/>
    </record> 
    
    <record id="action_clinica_waiting_room_view11" model="ir.actions.act_window.view">
        <field eval="1" name="sequence"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="clinica_waiting_room_tree2"/>
        <field name="act_window_id" ref="action_clinica_waiting_room2"/>
    </record>
    
    <record id="action_clinica_waiting_room_view22" model="ir.actions.act_window.view">
        <field eval="2" name="sequence"/>
        <field name="view_mode">calendar</field>
        <field name="view_id" ref="view_waiting_room_calendar2"/>
        <field name="act_window_id" ref="action_clinica_waiting_room2"/>
    </record>

    <!-- Waiting room menu -->
   <menuitem id="menu_clinica_waiting_room2"
       name="Consulta Externa"
       parent="menu_doctor_process"
       action="clinica_doctor_data.action_clinica_waiting_room2"
       groups="base.group_system,clinica_doctor_data.programmer_assistant,clinica_doctor_data.nursing_assistant,clinica_doctor_data.pharmacist,clinica_doctor_data.nursery_chief,clinica_doctor_data.administrative_assistant,clinica_doctor_data.accounting_assistant,clinica_doctor_data.clinical_auditor,clinica_doctor_data.management,clinica_doctor_data.accounting_assistant,clinica_doctor_data.surgeon,clinica_doctor_data.surgical_technologist,clinica_doctor_data.anesthesiologist" sequence="3"/>
        
 </odoo>
 